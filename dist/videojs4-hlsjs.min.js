/*! videojs4-hlsjs - v0.0.1 - 2016-03-09
* Copyright (c) 2016 jkliou; Licensed Apache-2.0 */
!function(a,b,c,d,e){"use strict";b.HlsJs=b.Html5.extend({init:function(a,d,e){this.hls=new c,a.hlsJs=this,b.Html5.call(this,a,d,e),this.hls.on(c.Events.MSE_ATTACHED,b.bind(this,this.onMseAttached)),this.hls.on(c.Events.MANIFEST_PARSED,b.bind(this,this.onManifestParsed)),this.hls.on(c.Events.ERROR,b.bind(this,this.onError)),this.hls.on(c.Events.LEVEL_LOADED,b.bind(this,this.onLevelLoaded))}}),b.HlsJs.prototype.options_={debug:!1,autoStartLoad:!1,maxBufferLength:30,maxBufferSize:6e7,enableWorker:!0,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:500,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:6,manifestLoadingRetryDelay:500,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:200},b.HlsJs.prototype.hls={},b.HlsJs.prototype.dispose=function(){b.Html5.prototype.dispose.call(this)},b.HlsJs.prototype.load=function(){this.hls.startLoad()},b.HlsJs.prototype.onLevelLoaded=function(a,b){b.details.totalduration},b.HlsJs.prototype.onError=function(a,d){if(d.fatal)switch(d.type){case c.ErrorTypes.NETWORK_ERROR:b.log("fatal network error encountered, try to recover"),this.hls.recoverNetworkError();break;case c.ErrorTypes.MEDIA_ERROR:b.log("fatal media error encountered, try to recover"),this.hls.recoverMediaError();break;default:this.hls.destroy(),this.player().error(d)}switch(d.details){case this.hls.ErrorDetails.MANIFEST_LOAD_ERROR:case this.hls.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case this.hls.ErrorDetails.MANIFEST_PARSING_ERROR:case this.hls.ErrorDetails.LEVEL_LOAD_ERROR:case this.hls.ErrorDetails.LEVEL_LOAD_TIMEOUT:case this.hls.ErrorDetails.LEVEL_SWITCH_ERROR:case this.hls.ErrorDetails.FRAG_LOAD_ERROR:case this.hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case this.hls.ErrorDetails.FRAG_LOAD_TIMEOUT:case this.hls.ErrorDetails.FRAG_PARSING_ERROR:case this.hls.ErrorDetails.FRAG_APPENDING_ERROR:b.log(d.type),b.log(d.details)}},b.HlsJs.prototype.onMseAttached=function(){this.triggerReady()},b.HlsJs.prototype.onManifestParsed=function(){this.player().options().autoplay&&this.player().play()},b.options.techOrder.unshift("hlsJs"),function(){var a=b.HlsJs.prototype.setSource,c=b.HlsJs.prototype.disposeSourceHandler;b.HlsJs.prototype.setSource=function(b){var c=a.call(this,b);return this.source_=b.src,this.hls.loadSource(this.source_),this.hls.attachMedia(this.el_),c},b.HlsJs.prototype.disposeSourceHandler=function(){return this.source_=e,c.call(this)}}(),b.HlsJs.canPlaySource=function(a){var b=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return b.test(a.type)},b.HlsJs.supportsNativeHls=function(){var a,c,e=d.createElement("video");return b.Html5.isSupported()?(a=e.canPlayType("application/x-mpegURL"),c=e.canPlayType("application/vnd.apple.mpegURL"),/probably|maybe/.test(a)||/probably|maybe/.test(c)):!1}(),b.HlsJs.isSupported=function(){return c.isSupported()}}(window,window.videojs,window.Hls,document);